{
   "title":"root",
   "self":{
      "vendor":"referral-saasquatch",
      "name":"rs_schema",
      "format":"jsonschema",
      "version":"1-3-0"
   },
   "type":"object",
   "properties":{
      "jsOptions":{
         "type":"object",
         "properties":{
            "widget":{
               "type":"object",
               "properties":{
                  "defaultWidgetType":{
                     "type":"string",
                     "title":"Default Widget Type",
                     "default":"REFERRER_WIDGET",
                     "enum":[
                        "REFERRER_WIDGET"
                     ],
                     "options":{
                        "enum_titles":[
                           "Referrer's Widget"
                        ]
                     }
                  }
               }
            },
            "conversionUrls":{
               "type":"array",
               "items":{
                  "type":"string"
               }
            },
            "widgetUrlMappings":{
               "type":"array",
               "items":{
                  "type":"object",
                  "properties":{
                     "url":{
                        "type":"string"
                     },
                     "showAsCTA":{
                        "type":"boolean"
                     },
                     "displayOnLoad":{
                        "type":"boolean"
                     },
                     "widgetType":{
                        "type":"string",
                        "enum":[
                           "REFERRER_WIDGET"
                        ],
                        "options":{
                           "enum_titles":[
                              "Referrer's Widget"
                           ]
                        }
                     }
                  }
               }
            }
         }
      },
      "widget":{
         "type":"object",
         "properties":{
            "REFERRER_WIDGET":{
               "type":"object",
               "properties":{
                  "configuration":{
                     "properties":{
                        "themeMapping":{
                           "default":"widget"
                        }
                     }
                  },
                  "content":{
                     "properties":{
                        "widgetCustomization":{
                           "allOf":[
                              {
                                 "title":"Customize Referral Widget",
                                 "properties":{
                                    "widgetFont":{
                                       "default":"\"Helvetica Neue\",Helvetica,Arial,sans-serif"
                                    },
                                    "heading":{
                                       "default":"Refer a friend"
                                    },
                                    "headerDetails":{
                                       "default":"With Western Union sending money is hassle free. Are you already enjoying easy, convenient, and fast money transfers with us? If so, spread the word and share it with your friends!"
                                    },
                                    "shareCodeDetails":{
                                       "type":"string",
                                       "format":"markdown",
                                       "title":"Call To Action Text",
                                       "default":"Copy the link below and share it with your friends",
                                       "options":{
                                          "input_height":"100px",
                                          "validate":[
                                             "handlebars"
                                          ]
                                       }
                                    },
                                    "shareMediumDetails": {
                                       "type": "string",
                                       "title": "Share Medium Details",
                                       "default": "Or share using below channels"
                                    }
                                 }
                              }
                           ]
                        },
                        "sharingOptions":{
                           "allOf":[
                              {
                                 "$ref":"#/definitions/widget/definitions/content/definitions/shareContent"
                              }
                           ]
                        },
                        "textVariables":{
                           "allOf":[
                              {
                                 "title": "Text Variables",
                                 "type": "object",
                                 "properties": {
                                    "lang": {
                                      "default": "en"
                                    },
                                    "shareNotificationSuccess": {
                                       "default": "Copied!"
                                    },
                                    "shareNotificationFailure": {
                                       "default": "Press Ctrl+C to copy"
                                    },
                                    "shareButtons": {
                                       "title": "Share Buttons",
                                       "type": "object",
                                       "properties": {
                                          "copy": {
                                             "default": "Copy"
                                          }
                                       }
                                    }
                                 }
                              }
                           ]
                        }
                     }
                  }
               }
            }
         }
      },
      "email": {
         "type":"object",
         "properties": {
            "REFERRER_REWARD_LIMIT_REACHED":{
               "type":"object",
               "properties":{
                  "configuration":{
                     "allOf":[
                        {
                           "properties":{
                              "subject":{
                                 "default":"You have hit the reward limit!"
                              },
                              "themeMapping":{
                                 "default":"emails/referrer-reward-limit"
                              }
                           }
                        },
                        {
                           "$ref":"#/definitions/email/definitions/configuration"
                        }
                     ]
                  },
                  "content":{
                     "allOf":[
                        {
                           "properties":{
                              "headerImageUrl":{
                                 "default":"{{assets 'images/email/reward-limit-header.png'}}"
                              },
                              "headerContent":{
                                 "default":"#Reward Limit\nYou have successfully referred the maximum!"
                              },
                              "bodyContent":{
                                 "default":"Thanks for spreading the word about {{companyName}}. You've referred so many new people that you've earned the maximum number  of available rewards."
                              },
                              "shareCTA":{
                                 "default":"However, you can keep referring new users and giving {{format-reward 'REFERRED' includeUnit=true includeContextualText=true}} with your code. - **{{user.referralCode}}**"
                              }
                           }
                        },
                        {
                           "$ref":"#/definitions/email/definitions/generalContent"
                        },
                        {
                           "$ref":"#/definitions/email/definitions/shareContent"
                        }
                     ]
                  }
               }
            },
            "REFERRAL_CONVERTED":{
               "type":"object",
               "properties":{
                  "configuration":{
                     "allOf":[
                        {
                           "properties":{
                              "subject":{
                                 "default":"Congrats! You have earned {{format-reward 'REFERRER' includeUnit=true}} of free credit with {{companyName}}"
                              },
                              "themeMapping":{
                                 "default":"emails/referral-converted"
                              }
                           }
                        },
                        {
                           "$ref":"#/definitions/email/definitions/configuration"
                        }
                     ]
                  },
                  "content":{
                     "allOf":[
                        {
                           "properties":{
                              "headerImageUrl":{
                                 "default":"{{assets 'images/email/referral-converted-header.png'}}"
                              },
                              "headerContent":{
                                 "default":"#Congratulations\nYour friend has signed up for a {{companyName}} Account!"
                              },
                              "bodyContent":{
                                 "default":"You have now earned {{format-reward 'REFERRER' includeUnit=true includeContextualText=true}} with {{companyName}}. Refer more friends to save even more!",
                                 "options":{
                                    "hideFor":{
                                       "programSettingsReferrerRewardTypes":[
                                          "INTEGRATION"
                                       ]
                                    }
                                 }
                              },
                              "giftcardBodyContent":{
                                 "type":"string",
                                 "title":"Body Content",
                                 "format":"markdown",
                                 "propertyOrder":3,
                                 "default":"You have now earned {{format-reward 'REFERRER' includeUnit=true includeContextualText=true}}. You should receive an email shortly with instructions for redemption. Refer more friends to save even more!",
                                 "options":{
                                    "hidden":true,
                                    "validate":[
                                       "handlebars"
                                    ],
                                    "input_height":"50px",
                                    "showFor":{
                                       "programSettingsReferrerRewardTypes":[
                                          "INTEGRATION"
                                       ]
                                    }
                                 }
                              }
                           }
                        },
                        {
                           "$ref":"#/definitions/email/definitions/generalContent"
                        },
                        {
                           "$ref":"#/definitions/email/definitions/shareContent"
                        }
                     ]
                  }
               }
            },
            "REFERRAL_STARTED":{
               "type":"object",
               "properties":{
                  "configuration":{
                     "allOf":[
                        {
                           "properties":{
                              "subject":{
                                 "default":"​{{stringEmptyHandler newReferral.referredUser.firstName onEmpty='A friend'}}​ helped you get one step closer to {{format-reward 'REFERRER' includeUnit=true includeContextualText=true}}!"
                              },
                              "themeMapping":{
                                 "default":"emails/referral-started"
                              }
                           }
                        },
                        {
                           "$ref":"#/definitions/email/definitions/configuration"
                        }
                     ]
                  },
                  "content":{
                     "allOf":[
                        {
                           "properties":{
                              "headerImageUrl":{
                                 "default":"{{assets 'images/email/referral-started-header.png'}}"
                              },
                              "headerContent":{
                                 "default":"#Good News!\nYour friend has signed up for a free account with {{companyName}}!"
                              },
                              "bodyContent":{
                                 "default":"{{stringEmptyHandler newReferral.referredUser.firstName onEmpty='A friend'}}​ is currently trying out {{companyName}}. As a thank you from us, if they become a paying user, you will automatically receive {{format-reward 'REFERRER' includeUnit=true includeContextualText=true}}"
                              }
                           }
                        },
                        {
                           "$ref":"#/definitions/email/definitions/generalContent"
                        },
                        {
                           "$ref":"#/definitions/email/definitions/shareContent"
                        }
                     ]
                  }
               }
            },
            "REFERRED_REWARD_EARNED":{
               "type":"object",
               "properties":{
                  "configuration":{
                     "allOf":[
                        {
                           "properties":{
                              "subject":{
                                 "default":"Congrats! You have earned {{format-reward 'REFERRED' includeUnit=true}} of free credit with {{companyName}}"
                              },
                              "themeMapping":{
                                 "default":"emails/referred-reward-earned"
                              }
                           }
                        },
                        {
                           "$ref":"#/definitions/email/definitions/configuration"
                        }
                     ]
                  },
                  "content":{
                     "allOf":[
                        {
                           "properties":{
                              "headerImageUrl":{
                                 "default":"{{assets 'images/email/referral-started-header.png'}}"
                              },
                              "headerContent":{
                                 "default":"#Congratulations\nYou have earned a reward with {{companyName}}!"
                              },
                              "bodyContent":{
                                 "default":"You have now earned {{format-reward 'REFERRED' includeUnit=true includeContextualText=true}} with {{companyName}}.",
                                 "options":{
                                    "hideFor":{
                                       "programSettingsReferredRewardTypes":[
                                          "INTEGRATION"
                                       ]
                                    }
                                 }
                              },
                              "giftcardBodyContent":{
                                 "type":"string",
                                 "title":"Body Content",
                                 "format":"markdown",
                                 "propertyOrder":3,
                                 "default":"You have now earned {{format-reward 'REFERRED' includeUnit=true includeContextualText=true}}. You should receive an email shortly with instructions for redemption.",
                                 "options":{
                                    "hidden":true,
                                    "validate":[
                                       "handlebars"
                                    ],
                                    "input_height":"50px",
                                    "showFor":{
                                       "programSettingsReferredRewardTypes":[
                                          "INTEGRATION"
                                       ]
                                    }
                                 }
                              }
                           }
                        },
                        {
                           "$ref":"#/definitions/email/definitions/generalContent"
                        },
                        {
                           "$ref":"#/definitions/email/definitions/shareContent"
                        }
                     ]
                  }
               }
            }
         }
      }
   },
   "definitions":{
      "widget":{
         "definitions":{
            "content":{
               "definitions":{
                  "generalBody":{
                     "type":"object",
                     "properties":{
                        "widgetFont":{
                           "type":"string",
                           "title":"Widget Font:",
                           "enum":[
                              "\"Helvetica Neue\",Helvetica,Arial,sans-serif",
                              "'Lato',sans-serif",
                              "'Times New Roman'",
                              "Arial",
                              "Courier",
                              "Tahoma",
                              "Verdana",
                              "Georgia"
                           ],
                           "options":{
                              "enum_titles":[
                                 "Helvetica Neue",
                                 "Lato",
                                 "Times New Roman",
                                 "Arial",
                                 "Courier",
                                 "Tahoma",
                                 "Verdana",
                                 "Georgia"
                              ]
                           }
                        },
                        "heading":{
                           "type":"string",
                           "minLength":1,
                           "format":"markdown",
                           "title":"Heading Text:",
                           "options":{
                              "input_height":"100px",
                              "validate":[
                                 "handlebars"
                              ]
                           }
                        },
                        "headerDetails":{
                           "type":"string",
                           "minLength":1,
                           "format":"markdown",
                           "title":"Body Text:",
                           "options":{
                              "input_height":"100px",
                              "validate":[
                                 "handlebars"
                              ]
                           }
                        }
                     }
                  }
               }
            }
         }
      },
      "email":{
         "definitions":{
            "configuration":{
               "type":"object",
               "title":"Email Defaults",
               "properties":{
                  "fromName":{
                     "type":"string",
                     "title":"From Name",
                     "default":"{{companyName}}",
                     "propertyOrder":1,
                     "minLength":1,
                     "options":{
                        "validate":[
                           "handlebars"
                        ]
                     }
                  },
                  "fromAddress":{
                     "type":"string",
                     "title":"From Address",
                     "format":"email",
                     "default":"referral@mail.saasquat.ch",
                     "propertyOrder":2,
                     "minLength":5,
                     "options":{
                        "validate":[
                           "email"
                        ]
                     }
                  },
                  "subject":{
                     "type":"string",
                     "title":"Subject",
                     "format":"textarea",
                     "default":"Referral Update",
                     "propertyOrder":3,
                     "minLength":1,
                     "options":{
                        "validate":[
                           "handlebars"
                        ],
                        "input_height":"50px"
                     }
                  },
                  "themeMapping":{
                     "options":{
                        "hidden":true
                     }
                  }
               }
            },
            "generalContent":{
               "type":"object",
               "properties":{
                  "headerImageUrl":{
                     "type":"string",
                     "title":"Header Image URL",
                     "propertyOrder":1,
                     "options":{
                        "validate":[
                           "handlebars"
                        ]
                     }
                  },
                  "headerContent":{
                     "type":"string",
                     "title":"Header Content",
                     "format":"markdown",
                     "propertyOrder":2,
                     "options":{
                        "validate":[
                           "handlebars"
                        ],
                        "input_height":"50px"
                     }
                  },
                  "bodyContent":{
                     "type":"string",
                     "title":"Body Content",
                     "format":"markdown",
                     "propertyOrder":3,
                     "options":{
                        "validate":[
                           "handlebars"
                        ],
                        "input_height":"50px"
                     }
                  },
                  "footer":{
                     "type":"string",
                     "title":"Footer",
                     "format":"markdown",
                     "propertyOrder":1001,
                     "options":{
                        "validate":[
                           "handlebars"
                        ],
                        "input_height":"50px"
                     }
                  }
               }
            },
            "shareContent":{
               "type":"object",
               "properties":{
                  "shareCTA":{
                     "type":"string",
                     "title":"Share Code CTA",
                     "format":"markdown",
                     "propertyOrder":4,
                     "default":"Keep sharing your code and earn more discounts - **{{user.referralCode}}**",
                     "options":{
                        "validate":[
                           "handlebars"
                        ],
                        "input_height":"50px"
                     }
                  },
                  "hasShareLink":{
                     "type":"boolean",
                     "format":"checkbox",
                     "title":"Enable Share Link",
                     "propertyOrder":5,
                     "default":true
                  },
                  "shareButtonHeader":{
                     "type":"string",
                     "title":"Share Button Header",
                     "format":"markdown",
                     "propertyOrder":6,
                     "default":"Refer and Earn {{format-reward 'REFERRER' includeUnit=true includeContextualText=true}}",
                     "options":{
                        "validate":[
                           "handlebars"
                        ],
                        "input_height":"50px"
                     }
                  }
               }
            }
         }
      }
   },
   "required":[
      "jsOptions",
      "widget",
      "email"
   ]
}
